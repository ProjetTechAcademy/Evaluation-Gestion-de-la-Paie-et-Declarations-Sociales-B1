<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tableau de Bord Interactif - Gestion de Paie</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Amber -->
    <!-- Application Structure Plan: The SPA is designed as an interactive learning dashboard, not a linear document. It uses a thematic structure based on the core competencies of payroll management (Configuration, Variables, Bulletins, Declarations, Analysis, Transversal Skills). A persistent sidebar allows users to navigate between these themes. The main content area uses an interactive accordion to display detailed information for each sub-topic, preventing information overload. This structure was chosen to facilitate focused study, non-linear exploration, and quick reference, making it a more effective tool for exam preparation than a static document. -->
    <!-- Visualization & Content Choices: 
    - Main Program Outline -> Goal: Navigation -> Presentation: Sidebar Menu -> Interaction: Click to filter content -> Justification: Intuitive SPA navigation.
    - Detailed Tables -> Goal: Organize & Inform -> Presentation: Interactive Accordion with tabs for each detail (skills, laws, purpose) -> Interaction: Click to expand/collapse topics -> Justification: Manages high information density, allows user-controlled drill-down.
    - Competency Distribution -> Goal: Overview -> Viz: Donut Chart (Chart.js/Canvas) -> Interaction: Hover for details -> Justification: Provides a quick visual summary of the curriculum's scope.
    - Critical Legal/Numerical Data -> Goal: Highlight -> Presentation: Styled "Key Info" cards -> Interaction: Static display for emphasis -> Justification: Draws attention to essential facts.
    CONFIRMATION: NO SVG/Mermaid used. All visuals are HTML/CSS or Canvas-based via Chart.js. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #fefce8; 
        }
        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
            max-width: 300px;
            margin: auto;
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out, padding 0.3s ease-out;
        }
        .accordion-item.active .accordion-content {
            max-height: 2000px; 
            padding-top: 1rem;
            padding-bottom: 1rem;
        }
        .accordion-item.active .accordion-arrow {
            transform: rotate(180deg);
        }
        .accordion-arrow {
            transition: transform 0.3s ease-out;
        }
         ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #fef3c7;
        }
        ::-webkit-scrollbar-thumb {
            background: #f59e0b;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #d97706;
        }
    </style>
</head>
<body class="text-gray-800">

    <div class="flex flex-col md:flex-row min-h-screen">
        <!-- Sidebar Navigation -->
        <aside id="sidebar" class="w-full md:w-64 bg-amber-100 text-amber-900 p-4 md:p-6 flex-shrink-0 transition-all duration-300">
            <h2 class="text-2xl font-bold mb-6">Menu Principal</h2>
            <nav id="main-nav">
                <ul>
                    <li><a href="#" data-theme="all" class="nav-link active font-semibold text-lg py-2.5 px-4 block rounded-lg bg-amber-200">Vue d'ensemble</a></li>
                    <li><a href="#" data-theme="param√©trer" class="nav-link font-semibold text-lg py-2.5 px-4 block rounded-lg hover:bg-amber-200">Param√©trage</a></li>
                    <li><a href="#" data-theme="collecter" class="nav-link font-semibold text-lg py-2.5 px-4 block rounded-lg hover:bg-amber-200">Variables de Paie</a></li>
                    <li><a href="#" data-theme="contr√¥ler" class="nav-link font-semibold text-lg py-2.5 px-4 block rounded-lg hover:bg-amber-200">Bulletins de Paie</a></li>
                    <li><a href="#" data-theme="g√©rer" class="nav-link font-semibold text-lg py-2.5 px-4 block rounded-lg hover:bg-amber-200">D√©clarations Sociales</a></li>
                    <li><a href="#" data-theme="analyser" class="nav-link font-semibold text-lg py-2.5 px-4 block rounded-lg hover:bg-amber-200">Paie & Comptabilit√©</a></li>
                    <li><a href="#" data-theme="transversal" class="nav-link font-semibold text-lg py-2.5 px-4 block rounded-lg hover:bg-amber-200">Comp√©tences Transverses</a></li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 p-4 sm:p-6 md:p-10">
            <header class="mb-8">
                <h1 class="text-4xl font-bold text-amber-700">√âvaluation Gestion de la Paie et D√©clarations Sociales üöÄ‚ú®</h1>
                <p class="mt-2 text-lg text-gray-600">Un tableau de bord interactif pour ma√Ætriser les comp√©tences cl√©s du Gestionnaire de Paie.</p>
            </header>

            <!-- Overview Section -->
            <section id="overview-section" class="mb-10">
                 <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 items-center bg-white p-6 rounded-2xl shadow-md border border-amber-200">
                    <div class="lg:col-span-2">
                        <h2 class="text-2xl font-bold text-amber-600 mb-3">Bienvenue sur votre espace d'apprentissage</h2>
                        <p class="text-gray-700 leading-relaxed">
                            Cette application a √©t√© con√ßue pour vous aider √† naviguer et assimiler le programme du Bloc 1. Utilisez le menu pour explorer chaque grand th√®me. Chaque section contient des fiches d√©taill√©es sur les savoirs, les comp√©tences RNCP, les enjeux m√©tiers et les bases l√©gales √† ma√Ætriser. L'objectif est de transformer votre r√©vision en une exp√©rience active et structur√©e pour assurer votre succ√®s.
                        </p>
                        <div class="mt-6 flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 w-full">
                            <a href="https://projettechacademy.github.io/Preparation-Evaluation-GP_B1/" target="_blank" class="flex-1 inline-block bg-pink-500 text-white font-bold py-3 px-6 rounded-full shadow-md hover:bg-pink-600 transition-colors duration-200 text-center">
                                Pr√©paration √† l'√âvaluation üìù‚ú®
                            </a>
                            <a href="https://projettechacademy.github.io/Guide-de-Survie-Pour-Evaluation-Paie/" target="_blank" class="flex-1 inline-block bg-amber-500 text-white font-bold py-3 px-6 rounded-full shadow-md hover:bg-amber-600 transition-colors duration-200 text-center">
                                Acc√©der au Guide de Survie
                            </a>
                            <a href="https://projettechacademy.github.io/Suivi-et-Revision-des-Competences-Gestionnaire-de-Paie/" target="_blank" class="flex-1 inline-block bg-purple-500 text-white font-bold py-3 px-6 rounded-full shadow-md hover:bg-purple-600 transition-colors duration-200 text-center">
                                Programme ‚ú® Suivi ‚ú® R√©vision ‚ú® √âvaluation ‚ú®
                            </a>
                        </div>
                    </div>
                    <div>
                        <div class="chart-container">
                            <canvas id="competencyChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="content-section">
                <h2 id="section-title" class="text-3xl font-bold text-amber-600 mb-6"></h2>
                <p id="section-intro" class="text-gray-600 mb-8 max-w-4xl"></p>
                <div id="accordion-container" class="space-y-4">
                </div>
            </section>
        </main>
    </div>

    <script>
        const payrollData = [
            {
                theme: "param√©trer",
                title: "Param√©trer le logiciel de paie",
                intro: "Le param√©trage initial du logiciel est le socle de toute la gestion de la paie. Une configuration pr√©cise et conforme garantit la fiabilit√© des calculs et des d√©clarations futures, √©vitant des erreurs en cascade.",
                subtopics: [
                    { 
                        title: "Identification de l'entreprise", 
                        toMaster: "Saisie des donn√©es administratives (Raison sociale, Siret, APE), identification de la convention collective (IDCC), connaissance des r√®gles d'opposabilit√©. Ma√Ætriser l'impact de ces donn√©es sur le calcul de la paie et la conformit√© l√©gale de l'entreprise.", 
                        competence: "RNCP38019BC01", 
                        competenceTitle: "G√©rer les variables et les bulletins de paie", 
                        why: "Une identification correcte est le point de d√©part de toute paie conforme. Une erreur sur le Siret ou le code APE peut entra√Æner de lourds redressements URSSAF. L'opposabilit√© est une notion juridique cruciale qui d√©termine l'application des dispositions d'une convention collective.", 
                        legal: "Art. L3243-2 Code du travail" 
                    },
                    { 
                        title: "Identification du salari√©", 
                        toMaster: "Collecte et v√©rification des donn√©es essentielles : num√©ro de s√©curit√© sociale valide, classification, statut, taux de pr√©l√®vement √† la source (PAS) personnalis√©. S'assurer de l'int√©grit√© des informations transmises par le salari√© pour √©viter des erreurs qui affectent la paie et les d√©clarations.", 
                        competence: "RNCP38019BC01", 
                        competenceTitle: "G√©rer les variables et les bulletins de paie", 
                        why: "Des donn√©es salari√©s erron√©es peuvent causer des bulletins de paie incorrects et impacter directement le net √† payer, le net imposable, et la DSN, augmentant le risque de litiges avec les salari√©s ou les organismes sociaux.", 
                        legal: "Art. R3243-1 Code du travail" 
                    },
                    { 
                        title: "Contrat de travail", 
                        toMaster: "Diff√©rencier les types de contrats (CDI/CDD), g√©rer les dates d'entr√©e et de sortie, la p√©riode d'essai, et la dur√©e du travail. Ma√Ætriser les formalit√©s d'embauche (DPAE) et de rupture (d√©mission, licenciement).", 
                        competence: "RNCP38019BC02", 
                        competenceTitle: "G√©rer les d√©clarations sociales et les cotisations", 
                        why: "La non-conformit√© des contrats de travail peut entra√Æner des contentieux aux Prud'hommes et des sanctions pour l'entreprise. Un bon param√©trage assure la bonne application des r√®gles contractuelles et la validit√© des formalit√©s l√©gales.", 
                        legal: "Art. L1221-10 et suivants C. trav." 
                    },
                ],
                courseModules: [
                    {
                        title: "B1 M1 Param√©trer le logiciel de paie",
                        link: "https://app.comptalia.com/v3/medialibrary/lib/themes?promotionId=4104&subjectId=49239&moduleId=70017",
                        documents: [
                            {name: "B1_M1_001: T√©l√©charger le logiciel", link: "#"},
                            {name: "B1_M1_002: La base de donn√©es 2019", link: "#"},
                            {name: "B1_M1_003: Lancement de l'application", link: "#"},
                            {name: "B1_M1_004: D√©couverte de l'application", link: "#"},
                            {name: "B1_M1_005: La cr√©ation d'une soci√©t√©", link: "#"},
                            {name: "B1_M1_006: Le param√©trage d'une soci√©t√©", link: "#"},
                            {name: "B1_M1_007: Le param√©trage de l'√©tablissement", link: "#"},
                            {name: "B1_M1_008: La cr√©ation des fiches salari√©s", link: "#"},
                            {name: "B1_M1_009: Le param√©trage des bulletins mod√®les", link: "#"},
                            {name: "B1_M1_010: Le param√©trage du salaire brut", link: "#"},
                            {name: "B1_M1_011: Le param√©trage des cotisations sociales", link: "#"},
                            {name: "B1_M1_012: Le param√©trage des salaires nets", link: "#"},
                            {name: "B1_M1_013: Les d√©clarations sociales", link: "#"},
                            {name: "B1_M1_014: Questions fr√©quentes", link: "#"},
                            {name: "B1_M1_015: L'Acc√®s √† d'autres logiciels de paie", link: "#"},
                            {name: "B1_M1_016: Synth√®se et application : Param√©trer le logiciel de paie", link: "#"}
                        ]
                    }
                ]
            },
            {
                theme: "collecter",
                title: "Collecter et traiter les variables de paie",
                intro: "La collecte et le traitement des √©l√©ments variables constituent le c≈ìur du m√©tier. Chaque mois, ces donn√©es fluctuantes doivent √™tre calcul√©es avec rigueur pour refl√©ter l'activit√© r√©elle du salari√© et garantir une r√©mun√©ration juste.",
                subtopics: [
                    { 
                        title: "Salaire de base", 
                        toMaster: "Calculer le salaire brut (mensuel ou horaire) en respectant les minimas l√©gaux (SMIC) et conventionnels. Ma√Ætriser le calcul du prorata du salaire en cas d'absence, de temps partiel, ou d'entr√©e/sortie en cours de mois. S'assurer que le calcul est juste et conforme pour ne pas impacter le reste du bulletin.", 
                        competence: "RNCP38019BC01", 
                        competenceTitle: "G√©rer les variables et les bulletins de paie", 
                        why: "Le salaire de base est l'assiette principale du calcul de la paie. Une erreur √† cette √©tape invalide l'ensemble du bulletin et peut causer des litiges avec le salari√© ou un contr√¥le de l'inspection du travail. Le respect des minimas est une obligation l√©gale.", 
                        legal: "Art. L3242-1 Code du travail" 
                    },
                    { 
                        title: "Heures suppl√©mentaires et compl√©mentaires", 
                        toMaster: "Conna√Ætre les taux de majoration l√©gaux (25% pour les 8 premi√®res, puis 50%) ou conventionnels, qui peuvent √™tre plus favorables. Identifier les plafonds et calculer les montants pr√©cis. Ma√Ætriser la distinction entre heures suppl√©mentaires (pour un salari√© √† temps plein) et heures compl√©mentaires (pour un temps partiel), car les r√®gles et les majorations sont diff√©rentes. Ne pas oublier d'int√©grer les exon√©rations sociales et fiscales (TEPA).", 
                        competence: "RNCP38019BC01", 
                        competenceTitle: "G√©rer les variables et les bulletins de paie", 
                        why: "Un d√©compte ou un calcul incorrect peut entra√Æner un non-respect du droit du travail. Une mauvaise int√©gration des exon√©rations peut mener √† un redressement URSSAF ou un manque √† gagner pour l'entreprise.", 
                        legal: "Art. L3121-28 C. trav., Art. L241-3 CSS" 
                    },
                    { 
                        title: "Primes et commissions", 
                        toMaster: "Identifier les primes soumises √† cotisations (ex: prime d'anciennet√©, d'assiduit√©, sur objectifs) par opposition aux frais professionnels. Distinguer les primes fixes des variables. Calculer les montants (% du CA, forfait) et v√©rifier leur impact sur les assiettes de cotisations pour la DSN, car elles entrent dans le calcul du salaire brut.", 
                        competence: "RNCP38019BC01", 
                        competenceTitle: "G√©rer les variables et les bulletins de paie", 
                        why: "Une erreur dans le traitement des primes peut fausser les bases de calcul des cotisations sociales, compromettre la justesse de la DSN, et g√©n√©rer de l'insatisfaction chez le salari√© si le montant est incorrect. Les primes sont un √©l√©ment de r√©mun√©ration et doivent √™tre trait√©es avec rigueur.", 
                        legal: "Loi sur la r√©mun√©ration variable" 
                    },
                    { 
                        title: "Avantages en nature", 
                        toMaster: "Ma√Ætriser la valorisation des avantages en nature (v√©hicule de fonction, logement, repas, etc.) selon la m√©thode forfaitaire ou la valeur r√©elle. Appliquer les cotisations sociales correspondantes et v√©rifier leur impact sur le net imposable de l'employ√©.", 
                        competence: "RNCP38019BC01", 
                        competenceTitle: "G√©rer les variables et les bulletins de paie", 
                        why: "Le mauvais traitement des avantages en nature est une cause fr√©quente de redressement URSSAF. Un calcul incorrect a un impact direct sur le net imposable du salari√©, ce qui peut entra√Æner des probl√®mes fiscaux et des litiges.", 
                        legal: "Circulaire Urssaf, Bulletin Officiel de la S√©curit√© Sociale (BoSS)" 
                    },
                    { 
                        title: "Cong√©s pay√©s", 
                        toMaster: "Ma√Ætriser le d√©compte des cong√©s en jours ouvrables ou ouvr√©s. Savoir calculer l'indemnit√© selon la r√®gle du maintien de salaire et la r√®gle du 1/10e, et appliquer la plus favorable au salari√©. G√©rer le prorata des droits acquis pour un salari√© en entr√©e ou sortie de p√©riode.", 
                        competence: "RNCP38019BC01", 
                        competenceTitle: "G√©rer les variables et les bulletins de paie", 
                        why: "Le droit aux cong√©s pay√©s est fondamental. Toute erreur, qu'elle soit dans l'acquisition ou le calcul de l'indemnit√©, est une source de litige potentiel avec le salari√© et peut √™tre sanctionn√©e par l'inspection du travail. Le respect de la m√©thode la plus favorable est une obligation l√©gale.", 
                        legal: "Art. L3141-1 Code du travail" 
                    },
                    { 
                        title: "Absences et arr√™ts maladie", 
                        toMaster: "Calculer les retenues sur salaire pour absence. Appliquer le maintien de salaire selon la l√©gislation ou la convention collective. Ma√Ætriser la gestion de la subrogation de l'employeur (l'entreprise per√ßoit les IJSS directement de la S√©curit√© Sociale et les reverse au salari√©) et les Indemnit√©s Journali√®res de la S√©curit√© Sociale (IJSS).", 
                        competence: "RNCP38019BC01", 
                        competenceTitle: "G√©rer les variables et les bulletins de paie", 
                        why: "La gestion des arr√™ts est complexe. Des erreurs peuvent entra√Æner des sanctions, la non-conformit√© de la paie, ou un non-respect de la protection sociale du salari√©. Une mauvaise gestion de la subrogation affecte la tr√©sorerie de l'entreprise.", 
                        legal: "Art L1226-1 Code du travail" 
                    },
                ],
                courseModules: [
                    {
                        title: "B1 M2 Collecter et traiter les variables de paie",
                        link: "https://app.comptalia.com/v3/medialibrary/lib/themes?promotionId=4104&subjectId=49239&moduleId=70018",
                        documents: [
                            { name: "B1_M2_001: Comment et pourquoi se former √† la collecte et au calcul des variables de paie", link: "https://app.comptalia.com/v3/medialibrary/lib/resources?promotionId=4104&subjectId=49239&moduleId=70018&themeId=107284" },
                            { name: "B1_M2_002: Pr√©sentation de la Gestion de la Paie", link: "https://app.comptalia.com/v3/medialibrary/lib/resources?promotionId=4104&subjectId=49239&moduleId=70018&themeId=104418" },
                            { name: "B1_M2_003: La gestion de la paie (pour d√©butants)", link: "https://app.comptalia.com/v3/medialibrary/lib/resources?promotionId=4104&subjectId=49239&moduleId=70018&themeId=123854" },
                            { name: "B1_M2_004: Le temps de travail", link: "https://app.comptalia.com/v3/medialibrary/lib/resources?promotionId=4104&subjectId=49239&moduleId=70018&themeId=107360" },
                            { name: "B1_M2_005: La r√©mun√©ration", link: "https://app.comptalia.com/v3/medialibrary/lib/resources?promotionId=4104&subjectId=49239&moduleId=70018&themeId=107361" },
                            { name: "B1_M2_006: Application : Collecter et traiter les variables de paie", link: "https://app.comptalia.com/v3/medialibrary/lib/resources?promotionId=4104&subjectId=49239&moduleId=70018&themeId=132755" }
                        ]
                    },
                    {
                        title: "B1 M3 G√©rer la r√©mun√©ration",
                        link: "https://app.comptalia.com/v3/medialibrary/lib/themes?promotionId=4104&subjectId=49239&moduleId=70019",
                        documents: [
                            { name: "B1_M3_001: La pr√©sentation et la m√©thodologie du bulletin de salaire", link: "https://app.comptalia.com/v3/medialibrary/lib/resources?promotionId=4104&subjectId=49239&moduleId=70019&themeId=108897" },
                            { name: "B1_M3_002: Le r√®glement du salaire", link: "https://app.comptalia.com/v3/medialibrary/lib/resources?promotionId=4104&subjectId=49239&moduleId=70019&themeId=108898" },
                            { name: "B1_M3_003: La r√©mun√©ration brute : l'acquisition et la prise de cong√©s pay√©s", link: "https://app.comptalia.com/v3/medialibrary/lib/resources?promotionId=4104&subjectId=49239&moduleId=70019&themeId=129632" },
                            { name: "B1_M3_004: La r√©mun√©ration brute : l‚Äôindemnit√© de cong√©s pay√©s", link: "https://app.comptalia.com/v3/medialibrary/lib/resources?promotionId=4104&subjectId=49239&moduleId=70019&themeId=129631" },
                            { name: "B1_M3_05_La r√©mun√©ration brute : les heures compl√©mentaires", link: "https://app.comptalia.com/v3/medialibrary/lib/resources?promotionId=4104&subjectId=49239&moduleId=70019&themeId=108870" },
                            { name: "B1_M3_006_Pr√©sentation de la r√©mun√©ration brute et de la dur√©e l√©gale du travail", link: "https://app.comptalia.com/v3/medialibrary/lib/resources?promotionId=4104&subjectId=49239&moduleId=70019&themeId=129816" },
                            { name: "B1_M3_007_Pr√©sentation de la r√©mun√©ration brute et le temps de travail effectif", link: "https://app.comptalia.com/v3/medialibrary/lib/resources?promotionId=4104&subjectId=49239&moduleId=70019&themeId=129815" },
                            { name: "B1_M3_008_La r√©mun√©ration brute : le salaire de base, les primes et la retenue pour absence", link: "https://app.comptalia.com/v3/medialibrary/lib/resources?promotionId=4104&subjectId=49239&moduleId=70019&themeId=108894" },
                            { name: "B1_M3_009_La r√©mun√©ration brute : les heures suppl√©mentaires et le dimanche travaill√©", link: "https://app.comptalia.com/v3/medialibrary/lib/resources?promotionId=4104&subjectId=49239&moduleId=70019&themeId=109013" },
                            { name: "B1_M3_010_La r√©mun√©ration brute : les heures suppl√©mentaires", link: "https://app.comptalia.com/v3/medialibrary/lib/resources?promotionId=4104&subjectId=49239&moduleId=70019&themeId=108869" },
                            { name: "B1_M3_011_La r√©mun√©ration brute : les avantages en nature", link: "https://app.comptalia.com/v3/medialibrary/lib/resources?promotionId=4104&subjectId=49239&moduleId=70019&themeId=108868" },
                            { name: "B1_M3_012_La r√©mun√©ration brute : l‚Äôarr√™t de travail, la retenue pour absence, la subrogation et les IJSS", link: "https://app.comptalia.com/v3/medialibrary/lib/resources?promotionId=4104&subjectId=49239&moduleId=70019&themeId=129824" },
                            { name: "B1_M3_013_La r√©mun√©ration brute : l‚Äôarr√™t de travail et le compl√©ment employeur", link: "https://app.comptalia.com/v3/medialibrary/lib/resources?promotionId=4104&subjectId=49239&moduleId=70019&themeId=130913" },
                            { name: "B1_M3_014_La gr√®ve et le lock-out", link: "https://app.comptalia.com/v3/medialibrary/lib/resources?promotionId=4104&subjectId=49239&moduleId=70019&themeId=107340" }
                        ]
                    }
                ]
            },
            {
                theme: "contr√¥ler",
                title: "Contr√¥ler et √©diter les Bulletins de paie",
                intro: "L'√©dition du bulletin de paie est l'aboutissement du processus mensuel. Cette √©tape cruciale exige un contr√¥le m√©ticuleux pour garantir l'exactitude des informations transmises au salari√© et aux organismes.",
                subtopics: [
                    { 
                        title: "Bases et taux de cotisations sociales", 
                        toMaster: "Conna√Ætre les bases plafonn√©es et d√©plafonn√©es (avec le PMSS comme r√©f√©rence). Appliquer les taux des diff√©rentes cotisations (URSSAF, retraite, pr√©voyance). G√©rer les r√©gularisations annuelles et les sp√©cificit√©s des taux en fonction du statut du salari√©.", 
                        competence: "RNCP38019BC01", 
                        competenceTitle: "G√©rer les variables et les bulletins de paie", 
                        why: "L'exactitude des bases et des taux est fondamentale pour la conformit√©. Une erreur peut entra√Æner un sous-paiement des cotisations, menant √† des p√©nalit√©s lors d'un contr√¥le de l'URSSAF.", 
                        legal: "Articles L241-8 Code de la S√©curit√© Sociale (CSS), R√®glement G√©n√©ral des Cotisations Patronales (RGCP)" 
                    },
                    { 
                        title: "R√©ductions et all√®gements", 
                        toMaster: "Ma√Ætriser le calcul de la r√©duction g√©n√©rale de cotisations (ex-r√©duction Fillon). Identifier les conditions d'application et les seuils de r√©mun√©ration pour cette exon√©ration. Conna√Ætre les exon√©rations sp√©cifiques comme celles sur les heures suppl√©mentaires (TEPA).", 
                        competence: "RNCP38019BC01", 
                        competenceTitle: "G√©rer les variables et les bulletins de paie", 
                        why: "Ces dispositifs sont des leviers majeurs pour optimiser l√©galement la masse salariale. Une mauvaise ma√Ætrise entra√Æne un surco√ªt pour l'entreprise ou, pire, un redressement en cas de calcul erron√©.", 
                        legal: "D√©crets en vigueur" 
                    },
                    { 
                        title: "Calcul du net et de l'imposable", 
                        toMaster: "Comprendre les diff√©rentes notions : net imposable, net √† payer, et net social. Ma√Ætriser le calcul et l'application du pr√©l√®vement √† la source (PAS) et des contributions CSG/CRDS, en tenant compte du taux personnalis√© du salari√©.", 
                        competence: "RNCP38019BC01", 
                        competenceTitle: "G√©rer les variables et les bulletins de paie", 
                        why: "La clart√© du bulletin de paie est essentielle pour le salari√©. Un calcul faux peut entra√Æner des r√©clamations, un litige fiscal, et remettre en question la cr√©dibilit√© du gestionnaire de paie.", 
                        legal: "BOFiP (Bulletin Officiel des Finances Publiques), Code G√©n√©ral des Imp√¥ts" 
                    },
                    { 
                        title: "√âdition du bulletin de paie", 
                        toMaster: "Savoir pr√©senter toutes les mentions obligatoires et les justificatifs de calcul. Garantir que le bulletin respecte la l√©gislation en vigueur et qu'il est compr√©hensible pour le salari√©. Pr√©parer le bulletin pour sa transmission (papier ou √©lectronique).", 
                        competence: "RNCP38019BC01", 
                        competenceTitle: "G√©rer les variables et les bulletins de paie", 
                        why: "Le bulletin est une preuve juridique en cas de contr√¥le ou de litige. Sa conformit√© est indispensable et toute omission peut avoir des cons√©quences l√©gales importantes pour l'employeur.", 
                        legal: "Art L3243-2 C. trav." 
                    },
                ],
                courseModules: [
                     {
                        title: "B1 M4 Traiter les bulletins de salaires",
                        link: "https://app.comptalia.com/v3/medialibrary/lib/themes?promotionId=4104&subjectId=49239&moduleId=70020",
                        documents: [
                            {name: "B1_M4_001: Le bulletin de salaire d'un dirigeant sans contrat de travail", link: "#"},
                            {name: "B1_M4_002: L'activit√© partielle", link: "#"},
                            {name: "B1_M4_003: Le bulletin de salaire VRP", link: "#"},
                            {name: "B1_M4_004: Le bulletin de salaire du BTP (ouvrier)", link: "#"},
                            {name: "B1_M4_005: Le bulletin de salaire du BTP (ETAM et Cadres)", link: "#"},
                            {name: "B1_M4_006: Le bulletin de salaire Apprenti", link: "#"},
                            {name: "B1_M4_007: La gratification stagiaire", link: "#"},
                            {name: "B1_M4_008: Synth√®se et application : Collecter et traiter les variables de paie", link: "#"}
                        ]
                    },
                    {
                        title: "B1 M5 Contr√¥ler et √©diter les Bulletins de paie",
                        link: "#",
                        documents: [
                            {name: "B1_M5_001: Les diverses cotisations sociales", link: "#"},
                            {name: "B1_M5_002: Les bases de calcul des cotisations sociales", link: "#"},
                            {name: "B1_M5_003: Les r√©ductions de cotisations sociales", link: "#"},
                            {name: "B1_M5_004: Les r√©gularisations de cotisations sociales", link: "#"},
                            {name: "B1_M5_005: Le salaire net et le salaire imposable", link: "#"},
                            {name: "B1_M5_006: Les impacts du pr√©l√®vement √† la source", link: "#"},
                            {name: "B1_M5_007: Le salaire net √† payer et le net social", link: "#"},
                            {name: "B1_M5_008: Synth√®se et application : Contr√¥ler et √©diter les Bulletins de paie", link: "#"}
                        ]
                    }
                ]
            },
            {
                theme: "g√©rer",
                title: "G√©rer les d√©clarations sociales",
                intro: "La gestion des d√©clarations sociales, notamment la DSN, est une responsabilit√© majeure. Elle assure la transmission d'informations fiables aux organismes sociaux et le financement de la protection sociale.",
                subtopics: [
                    { 
                        title: "D√©clarations Sociales Nominatives (DSN)", 
                        toMaster: "Saisir les bases et montants avec exactitude, contr√¥ler les anomalies, et respecter le calendrier de d√©p√¥t (J+15 du mois suivant). G√©rer les diff√©rentes phases de la DSN, y compris les corrections et les signalements d'√©v√©nements (maladie, fin de contrat).", 
                        competence: "RNCP38019BC01", 
                        competenceTitle: "G√©rer les variables et les bulletins de paie", 
                        why: "La DSN est une obligation l√©gale lourde. Toute erreur de d√©claration ou non-respect du calendrier peut entra√Æner des p√©nalit√©s financi√®res √©lev√©es, un redressement de l'URSSAF et des dysfonctionnements dans les droits des salari√©s (mutuelle, retraite).", 
                        legal: "Code S√©curit√© Sociale Art. L133-5-2" 
                    },
                    { 
                        title: "Taxes et contributions", 
                        toMaster: "G√©rer le calcul et la d√©claration des taxes annexes √† la paie : taxe d'apprentissage, participation √† la formation continue, contribution unique au dialogue social et DOETH (D√©claration Obligatoire d'Emploi des Travailleurs Handicap√©s).", 
                        competence: "RNCP38019BC01", 
                        competenceTitle: "G√©rer les variables et les bulletins de paie", 
                        why: "Ces contributions repr√©sentent un volet essentiel de la paie. Leur non-d√©claration ou un calcul erron√© expose l'entreprise √† des p√©nalit√©s financi√®res et √† des contr√¥les suppl√©mentaires.", 
                        legal: "Dispositions l√©gales sp√©cifiques" 
                    },
                ],
                courseModules: [
                    {
                        title: "B1 M6 G√©rer les d√©clarations sociales",
                        link: "#",
                        documents: [
                            {name: "B1_M6_001: Comment et pourquoi se former √† l'√©dition et au contr√¥le des d√©clarations sociales", link: "#"},
                            {name: "B1_M6_002: Le livre de paie", link: "#"},
                            {name: "B1_M6_003: Les modalit√©s d√©claratives", link: "#"},
                            {name: "B1_M6_004: Le contenu des d√©clarations sociales : la r√©duction g√©n√©rale et TEPA", link: "#"},
                            {name: "B1_M6_005: Le contenu des d√©clarations sociales : les cotisations, le PAS et les contributions sociales", link: "#"},
                            {name: "B1_M6_006: La gestion des arr√™ts de travail en paie", link: "#"},
                            {name: "B1_M6_007: La taxe d'apprentissage", link: "#"},
                            {name: "B1_M6_008: La gestion de la d√©claration d'emploi des travailleurs handicap√©s", link: "#"},
                            {name: "B1_M6_009: Les taxes sur les salaires", link: "#"},
                            {name: "B1_M6_010: La participation √† la formation continue", link: "#"},
                            {name: "B1_M6_011: L'investissement obligatoire dans la construction", link: "#"},
                            {name: "B1_M6_012: Synth√®se et application : G√©rer les d√©clarations sociales", link: "#"}
                        ]
                    }
                ]
            },
            {
                theme: "analyser",
                title: "Analyser les √©carts entre la paie et la comptabilit√©",
                intro: "La coh√©rence entre la paie et la comptabilit√© est vitale pour la sant√© financi√®re de l'entreprise. Le gestionnaire de paie doit savoir identifier, analyser et corriger les √©carts pour garantir la fiabilit√© des comptes.",
                subtopics: [
                    { 
                        title: "Comptabilisation de la paie", 
                        toMaster: "Ma√Ætriser l'affectation des charges salariales et patronales aux bons comptes comptables (classes 4, 6 et 43). Savoir pr√©parer l'√©tat des √©critures de paie pour faciliter le travail du comptable. L'objectif est d'assurer une parfaite tra√ßabilit√© et coh√©rence entre les donn√©es de la paie et celles de la comptabilit√©.", 
                        competence: "RNCP38019BC01", 
                        competenceTitle: "G√©rer les variables et les bulletins de paie", 
                        why: "Une comptabilisation de la paie erron√©e peut fausser la vision financi√®re de l'entreprise. Cela complique l'√©tablissement des bilans et des comptes de r√©sultats, et peut entra√Æner des sanctions en cas de contr√¥le fiscal.", 
                        legal: "Plan comptable g√©n√©ral" 
                    },
                    { 
                        title: "Analyse et correction des √©carts", 
                        toMaster: "Savoir identifier les causes d'√©carts (probl√®me de param√©trage, erreur de saisie, mauvaise interpr√©tation d'une r√®gle). Proposer des actions correctrices sur le bulletin ou la DSN. Documenter les risques et les solutions pour s√©curiser la gestion de la paie.", 
                        competence: "RNCP38019BC01", 
                        competenceTitle: "G√©rer les variables et les bulletins de paie", 
                        why: "L'analyse des √©carts est un enjeu majeur pour la s√©curisation de la paie. Une analyse rigoureuse permet de limiter les risques de redressement, de cr√©dibiliser la fonction du gestionnaire de paie et d'√©viter les erreurs r√©currentes.", 
                        legal: "Bonnes pratiques et obligations l√©gales" 
                    },
                ],
                courseModules: [
                    {
                        title: "B1 M7 Analyser les √©carts entre la paie et la comptabilit√©",
                        link: "#",
                        documents: [
                            {name: "B1_M7_001: Les enjeux de l'identification et l'analyse des √©carts entre la paie et la comptabilit√©", link: "#"},
                            {name: "B1_M7_002: La pr√©sentation du plan comptable : g√©n√©ralit√©s", link: "#"},
                            {name: "B1_M7_003: Le grand livre comptable et les donn√©es paie", link: "#"},
                            {name: "B1_M7_004: Les op√©rations comptables issues de la paie", link: "#"},
                            {name: "B1_M7_005: Comptabilisation de la paie", link: "#"},
                            {name: "B1_M7_006: L'analyse des causes", link: "#"},
                            {name: "B1_M7_007: L'analyse des risques", link: "#"},
                            {name: "B1_M7_008: Les op√©rations de r√©gularisations", link: "#"},
                            {name: "B1_M7_009: Synth√®se et application : Analyser les √©carts entre la paie et la comptabilit√©", link: "#"}
                        ]
                    }
                ]
            },
            {
                theme: "transversal",
                title: "Comp√©tences Transverses",
                intro: "Au-del√† de la technique, le gestionnaire de paie moderne doit d√©velopper des comp√©tences transverses essentielles : veille juridique, communication, analyse de donn√©es et ma√Ætrise des outils SIRH.",
                subtopics: [
                    { 
                        title: "Veille juridique", 
                        toMaster: "Savoir rechercher et interpr√©ter les textes officiels (Code du Travail, CSS, Bulletin Officiel de la S√©curit√© Sociale). √ätre capable de synth√©tiser les √©volutions r√©glementaires et de les communiquer de mani√®re claire. Anticiper les impacts sur le logiciel de paie et les proc√©dures internes.", 
                        competence: "RNCP38019BC03", 
                        competenceTitle: "Assurer le suivi et le conseil aupr√®s de la client√®le ou en interne", 
                        why: "Le droit social est en constante √©volution. Une veille juridique rigoureuse est indispensable pour garantir la conformit√© de la paie et des d√©clarations, √©vitant ainsi les risques de redressement.", 
                        legal: "Sources officielles" 
                    },
                    { 
                        title: "Communication et conseil", 
                        toMaster: "Expliquer un bulletin de paie de mani√®re simple et p√©dagogique. R√©pondre aux questions des salari√©s et des managers de mani√®re claire et pr√©cise. Former les √©quipes aux outils et proc√©dures internes de gestion des temps ou des absences.", 
                        competence: "RNCP38019BC03", 
                        competenceTitle: "Assurer le suivi et le conseil aupr√®s de la client√®le ou en interne", 
                        why: "Le r√¥le du gestionnaire de paie s'√©tend au-del√† du simple calcul. Il est un conseiller cl√©. Une bonne communication r√©duit les erreurs, am√©liore la satisfaction des salari√©s et renforce la cr√©dibilit√© du service paie.", 
                        legal: "Bonnes pratiques" 
                    },
                    { 
                        title: "Reporting et pilotage RH", 
                        toMaster: "R√©aliser des tableaux de bord pertinents pour suivre les indicateurs cl√©s (masse salariale, effectifs, absent√©isme, etc.). Savoir exploiter les donn√©es issues de la paie pour aider √† la d√©cision strat√©gique de l'entreprise. Utiliser les outils de reporting du logiciel de paie.", 
                        competence: "RNCP38019BC03", 
                        competenceTitle: "Assurer le suivi et le conseil aupr√®s de la client√®le ou en interne", 
                        why: "Le gestionnaire de paie est au c≈ìur des donn√©es sociales de l'entreprise. Un reporting de qualit√© permet √† la direction RH de piloter sa strat√©gie, d'anticiper les co√ªts et de mieux g√©rer le capital humain.", 
                        legal: "Analyse de donn√©es" 
                    },
                    { 
                        title: "Utilisation du SIRH", 
                        toMaster: "R√©diger des modes op√©ratoires clairs et structur√©s pour le SIRH (Syst√®me d'Information de Gestion des Ressources Humaines). Former et accompagner les collaborateurs √† l'utilisation des diff√©rents modules (gestion des cong√©s, des temps de travail, etc.).", 
                        competence: "RNCP38019BC03", 
                        competenceTitle: "Assurer le suivi et le conseil aupr√®s de la client√®le ou en interne", 
                        why: "Une bonne ma√Ætrise et une bonne utilisation du SIRH permettent de fluidifier les processus RH, d'am√©liorer la productivit√© et de r√©duire les erreurs de saisie. Le gestionnaire de paie est souvent un acteur cl√© dans le d√©ploiement de ces outils.", 
                        legal: "Gestion de projet" 
                    },
                ]
            }
        ];
        
        document.addEventListener('DOMContentLoaded', () => {
            const navLinks = document.querySelectorAll('.nav-link');
            const accordionContainer = document.getElementById('accordion-container');
            const sectionTitle = document.getElementById('section-title');
            const sectionIntro = document.getElementById('section-intro');
            const overviewSection = document.getElementById('overview-section');
            const contentSection = document.getElementById('content-section');

            function renderContent(theme = 'all') {
                accordionContainer.innerHTML = '';
                
                if (theme === 'all') {
                    overviewSection.style.display = 'block';
                    contentSection.style.display = 'none';
                    return;
                }
                
                overviewSection.style.display = 'none';
                contentSection.style.display = 'block';

                const themeData = payrollData.find(item => item.theme === theme);
                if (!themeData) return;

                sectionTitle.textContent = themeData.title;
                sectionIntro.textContent = themeData.intro;
                
                // Render subtopic accordions
                themeData.subtopics.forEach((subtopic, index) => {
                    const item = document.createElement('div');
                    item.className = 'accordion-item bg-white rounded-xl shadow-sm border border-amber-200 overflow-hidden';
                    item.innerHTML = `
                        <button class="accordion-header w-full text-left p-5 flex justify-between items-center">
                            <span class="text-xl font-semibold text-amber-800">${subtopic.title}</span>
                            <span class="accordion-arrow text-amber-600">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                                </svg>
                            </span>
                        </button>
                        <div class="accordion-content px-5">
                            <div class="prose max-w-none">
                                <h4 class="font-bold text-amber-700">√Ä Ma√Ætriser :</h4>
                                <p>${subtopic.toMaster}</p>
                                <h4 class="font-bold text-amber-700 mt-4">Comp√©tence RNCP :</h4>
                                <p>${subtopic.competence} : <span class="font-bold text-red-600">${subtopic.competenceTitle}</span></p>
                                <h4 class="font-bold text-amber-700 mt-4">Enjeux & Risques :</h4>
                                <p>${subtopic.why}</p>
                                 <h4 class="font-bold text-amber-700 mt-4">R√©f√©rence L√©gale Cl√© :</h4>
                                 <p class="italic">${subtopic.legal}</p>
                            </div>
                        </div>
                    `;
                    accordionContainer.appendChild(item);
                });

                // Render course document lists
                if (themeData.courseModules) {
                    const moduleSection = document.createElement('div');
                    moduleSection.innerHTML = `<h3 class="text-2xl font-bold text-amber-600 mt-8 mb-4">Liste des Cours üìö</h3>`;
                    accordionContainer.appendChild(moduleSection);

                    themeData.courseModules.forEach(module => {
                        const moduleItem = document.createElement('div');
                        moduleItem.className = 'accordion-item bg-white rounded-xl shadow-sm border border-amber-200 overflow-hidden';
                        const moduleTitleHtml = module.link ? `<a href="${module.link}" target="_blank" class="hover:underline">${module.title}</a>` : module.title;
                        moduleItem.innerHTML = `
                             <button class="accordion-header w-full text-left p-5 flex justify-between items-center">
                                <span class="text-lg font-semibold text-amber-800">${moduleTitleHtml}</span>
                                <span class="accordion-arrow text-amber-600">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                                    </svg>
                                </span>
                            </button>
                            <div class="accordion-content px-5">
                                <div class="space-y-2 mt-2">
                                    ${module.documents.map(doc => `
                                        <label class="flex items-center text-gray-700">
                                            <input type="checkbox" class="form-checkbox h-4 w-4 text-amber-600 rounded">
                                            <span class="ml-2">${doc.link ? `<a href="${doc.link}" target="_blank" class="text-amber-800 hover:underline">${doc.name}</a>` : doc.name}</span>
                                        </label>
                                    `).join('')}
                                </div>
                            </div>
                        `;
                        accordionContainer.appendChild(moduleItem);
                    });
                }
            }

            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    
                    navLinks.forEach(l => {
                        l.classList.remove('active', 'bg-amber-200');
                    });
                    
                    link.classList.add('active', 'bg-amber-200');
                    const theme = link.getAttribute('data-theme');
                    renderContent(theme);
                });
            });

            accordionContainer.addEventListener('click', (e) => {
                const header = e.target.closest('.accordion-header');
                if (header) {
                    const item = header.parentElement;
                    item.classList.toggle('active');
                }
            });
            
            function createChart() {
                const ctx = document.getElementById('competencyChart').getContext('2d');
                const labels = payrollData.map(item => item.title);
                const data = payrollData.map(item => item.subtopics.length);

                new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Nombre de sous-th√®mes',
                            data: data,
                            backgroundColor: [
                                '#fcd34d', '#fbbf24', '#f59e0b', '#d97706', '#b45309', '#92400e'
                            ],
                            borderColor: '#fefce8',
                            borderWidth: 4,
                            hoverOffset: 8
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        let label = context.label || '';
                                        if (label) {
                                            label += ': ';
                                        }
                                        if (context.parsed !== null) {
                                            label += context.parsed + ' notions cl√©s';
                                        }
                                        return label;
                                    }
                                }
                            }
                        },
                        cutout: '60%'
                    }
                });
            }

            renderContent('all');
            createChart();
        });
    </script>
</body>
</html>
